---
import AdminHeader from "../components/admin/AdminHeader.astro";
import AdminSidebar from "../components/admin/AdminSidebar.astro";
import Layout from "../layouts/Layout.astro";
import HistoryHeader from "../components/history/HistoryHeader.astro";
import HistoryList from "../islands/HistoryList";
import "../styles/global.css";
import HistoryStats from "../components/history/HistoryStats.astro";
import { getStats } from "../lib/api/messages";
const stats = await getStats();
---

<Layout>
  <AdminSidebar />

  <main class="flex-1 flex flex-col bg-gray-50">
    <AdminHeader />

    <section class="p-8">
      <HistoryHeader />
      <HistoryStats
        totalMessages={stats.total_messages}
        modelsUsed={stats.models_used}
      />
      <div class="max-h-[600px] overflow-y-auto">
        <HistoryList client:load />
      </div>
    </section>
  </main>
</Layout>
